<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../dist/output.css">
</head>
<body class="bg-slate-50 flex justify-center  ">
    <form action="" id="formdata" class="max-w-[400px] shadow rounded flex flex-col w-full p-[15px] bg-white border-4 border-indigo-200 border-b-indigo-500 mt-6">
       <div class="w-full flex justify-center "><h1 class="text-violet-700 font-bold text-[20px]">Sign-UP</h1></div>
        <label for="name" class="mt-3">
            <span class="text-sm text-slate-500">Your Name*</span>
            <input type="text" name="name" placeholder="name" class="w-full px-3 py-2 text-sm rounded-md border-slate-300 border bg-wheat focus:ring-1 outline-none focus:ring-slate-500 shadow-slate-50 text-slate-500">
        </label>
        <label for="email" class="mt-3">
            <span class="text-sm text-slate-500">Email</span>
        <input type="email" id="email" name="Useremail" placeholder="email" class="w-full px-3 py-2 text-sm rounded-md border-slate-300 border bg-wheat focus:ring-1 outline-none focus:ring-slate-500 shadow-slate-50 text-slate-500">
        </label>
        <label for="password" class="mt-3">
            <span class="text-sm text-slate-500">Password</span>
        <input type="password" id="password" name="password" placeholder="pass" class="w-full px-3 py-2 text-sm rounded-md border-slate-300 border bg-wheat focus:ring-1 outline-none focus:ring-slate-500 shadow-slate-50 text-slate-500">
        </label>
        <div class="flex justify-center">
            <input type="submit" value="submit" class="px-4 py-2 rounded-full hover:bg-violet-100 cursor m-4 text-violet-700 font-semibold bg-violet-50 text-sm text-slate-500 ">
        </div>
        <div class="mt-[25px]">
            <ul class="flex gap-[20px] w-full justify-center">
                <li class="login-with-google">google</li>
                <li class="login-with-github">github</li>
                <li class="login-with-facebook">Facebook</li>
            </ul>
        </div>
    </form>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js "></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js "></script>
    <script>
        const firebaseConfig = {
    apiKey: "AIzaSyBEDzzo5U16CzvjwjZAF52JFJVHtYcqxlw",
    authDomain: "blogging-hamd.firebaseapp.com",
    projectId: "blogging-hamd",
    storageBucket: "blogging-hamd.appspot.com",
    messagingSenderId: "1082381242714",
    appId: "1:1082381242714:web:8e0fc3375d1fd2a66fe363"
  };

  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);  
  let provider = new firebase.auth.GoogleAuthProvider();
  let auth = firebase.auth();


        document.querySelector(".login-with-google").addEventListener('click', (e)=>{
            firebase.auth()
  .signInWithPopup(provider)
  .then((result) => {
    /** @type {firebase.auth.OAuthCredential} */
    var credential = result.credential;

    // This gives you a Google Access Token. You can use it to access the Google API.
    var token = credential.accessToken;
    // The signed-in user info.
    
    funForUserName(result);

    // IdP data available in result.additionalUserInfo.profile.
      // ...
  }).catch((error) => {
    // Handle Errors here.
    var errorCode = error.code;
    var errorMessage = error.message;
    // The email of the user's account used.
    var email = error.email;
    // The firebase.auth.AuthCredential type that was used.
    var credential = error.credential;
    // ...
  });
        })
        
        function funForUserName(result){
            console.log(result.user.displayName)
        }
        
        
        document.getElementById("formdata").addEventListener("submit",(event)=>{
            event.preventDefault();

let email = document.getElementById("email").value;
let password = document.getElementById("password").value;

firebase
    .auth()
    .createUserWithEmailAndPassword(email, password)
    .then((userCredential) => {
        window.location.href = "../index.html";
    })
    .catch((error) => {
        //console.log(error);
        Swal.fire({
            icon: 'error',
            title: 'Oops...',
            text: 'Username Already Taken',
            confirmButtonColor: "#212121"
        })
    });
        })
        </script>
</body>
</html>